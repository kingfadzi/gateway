{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-10-12T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_risk_aggregation",
      "_type": "workspace",
      "name": "Risk Aggregation API",
      "description": "API endpoints for the new risk aggregation architecture",
      "scope": "collection"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "parentId": "wrk_risk_aggregation",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:8080",
        "app_id": "test-app-001",
        "arb_name": "security_arb",
        "domain_risk_id": "domain-risk-123",
        "risk_item_id": "item-456",
        "field_key": "encryption_at_rest",
        "evidence_id": "evidence-789",
        "profile_field_id": "pf-test-001",
        "sme_email": "sme@example.com",
        "developer_email": "developer@example.com"
      },
      "dataPropertyOrder": {
        "&": [
          "base_url",
          "app_id",
          "arb_name",
          "domain_risk_id",
          "risk_item_id",
          "field_key",
          "evidence_id",
          "profile_field_id",
          "sme_email",
          "developer_email"
        ]
      }
    },
    {
      "_id": "folder_domain_risks",
      "_type": "request_group",
      "name": "Domain Risks (ARB/SME View)",
      "description": "Endpoints for domain-level risk aggregations",
      "environment": {},
      "environmentPropertyOrder": null
    },
    {
      "_id": "folder_risk_items",
      "_type": "request_group",
      "name": "Risk Items (PO View)",
      "description": "Endpoints for evidence-level risk items",
      "environment": {},
      "environmentPropertyOrder": null
    },
    {
      "_id": "folder_evidence_lifecycle",
      "_type": "request_group",
      "name": "Evidence Lifecycle (Auto-Creation Trigger)",
      "description": "Complete evidence submission → risk creation → approval → resolution workflow",
      "environment": {},
      "environmentPropertyOrder": null
    },
    {
      "_id": "req_domain_risks_by_arb",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Get Domain Risks for ARB",
      "description": "Get all domain risks assigned to a specific ARB, filtered by status",
      "url": "{{ _.base_url }}/api/v1/domain-risks/arb/{{ _.arb_name }}?status=PENDING_ARB_REVIEW,UNDER_ARB_REVIEW,AWAITING_REMEDIATION,IN_PROGRESS",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "parameters": [
        {
          "name": "status",
          "value": "PENDING_ARB_REVIEW,UNDER_ARB_REVIEW",
          "description": "Comma-separated list of statuses to filter by",
          "disabled": false
        }
      ],
      "body": {}
    },
    {
      "_id": "req_arb_summary",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Get ARB Dashboard Summary",
      "description": "Get aggregate statistics for ARB dashboard view",
      "url": "{{ _.base_url }}/api/v1/domain-risks/arb/{{ _.arb_name }}/summary",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "parameters": [
        {
          "name": "status",
          "value": "PENDING_ARB_REVIEW,UNDER_ARB_REVIEW,IN_PROGRESS",
          "description": "Filter statuses",
          "disabled": false
        }
      ],
      "body": {}
    },
    {
      "_id": "req_domain_risk_by_id",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Get Domain Risk by ID",
      "description": "Get a specific domain risk by its ID",
      "url": "{{ _.base_url }}/api/v1/domain-risks/{{ _.domain_risk_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_domain_risk_items",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Get Risk Items for Domain",
      "description": "Get all risk items belonging to a specific domain risk (drill-down view)",
      "url": "{{ _.base_url }}/api/v1/domain-risks/{{ _.domain_risk_id }}/items",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_domain_risks_by_app",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Get Domain Risks for App",
      "description": "Get all domain risks for a specific application",
      "url": "{{ _.base_url }}/api/v1/domain-risks/app/{{ _.app_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_reassign_domain_risk",
      "_type": "request",
      "parentId": "folder_domain_risks",
      "name": "Reassign Domain Risk",
      "description": "Reassign a domain risk to a different ARB for workload balancing",
      "url": "{{ _.base_url }}/api/v1/domain-risks/{{ _.domain_risk_id }}/assign",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"assignedArb\": \"integrity_arb\",\n  \"assignedBy\": \"admin_user\",\n  \"assignmentReason\": \"Workload balancing - security team overloaded\"\n}"
      }
    },
    {
      "_id": "req_risk_items_by_app",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Risk Items for App",
      "description": "Get all risk items for an app, prioritized by score (PO workbench view)",
      "url": "{{ _.base_url }}/api/v1/risk-items/app/{{ _.app_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_risk_items_by_status",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Risk Items by Status",
      "description": "Get risk items for an app filtered by status",
      "url": "{{ _.base_url }}/api/v1/risk-items/app/{{ _.app_id }}/status/OPEN",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "parameters": [],
      "body": {}
    },
    {
      "_id": "req_risk_item_by_id",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Risk Item by ID",
      "description": "Get a specific risk item by its ID",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_update_risk_item_status",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Update Risk Item Status",
      "description": "Update the status of a risk item (triggers domain risk recalculation)",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/status",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"RESOLVED\",\n  \"resolution\": \"FIXED\",\n  \"resolutionComment\": \"Issue has been resolved. Evidence updated with proper encryption configuration.\"\n}"
      }
    },
    {
      "_id": "req_risk_items_by_field",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Risk Items by Field",
      "description": "Get all risk items for a specific field key (field-specific analysis)",
      "url": "{{ _.base_url }}/api/v1/risk-items/field/{{ _.field_key }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_risk_items_by_evidence",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Risk Items by Evidence",
      "description": "Get all risk items triggered by a specific evidence submission",
      "url": "{{ _.base_url }}/api/v1/risk-items/evidence/{{ _.evidence_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_create_manual_risk",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Create Manual Risk Item",
      "description": "Create a risk item manually (not triggered by evidence)",
      "url": "{{ _.base_url }}/api/v1/risk-items",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"appId\": \"{{ _.app_id }}\",\n  \"fieldKey\": \"{{ _.field_key }}\",\n  \"profileFieldId\": null,\n  \"title\": \"Manual risk: Encryption configuration review\",\n  \"description\": \"Security team identified potential encryption misconfiguration during audit\",\n  \"priority\": \"HIGH\",\n  \"createdBy\": \"security_arb_user\",\n  \"evidenceId\": null\n}"
      }
    },
    {
      "_id": "req_add_comment",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Add Comment to Risk Item",
      "description": "Add a comment to a risk item for discussion",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/comments",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"commentType\": \"REVIEW\",\n  \"commentText\": \"Reviewed the encryption configuration. Needs to implement AES-256 with proper key management.\",\n  \"commentedBy\": \"security_arb_user\",\n  \"isInternal\": false\n}"
      }
    },
    {
      "_id": "req_get_comments",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Get Comments for Risk Item",
      "description": "Get all comments for a risk item",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/comments",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "parameters": [
        {
          "name": "includeInternal",
          "value": "false",
          "description": "Include internal ARB notes",
          "disabled": false
        }
      ],
      "body": {}
    },
    {
      "_id": "req_example_resolve_item",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Example: Resolve Risk Item",
      "description": "Example request to resolve a risk item",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/status",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"RESOLVED\",\n  \"resolution\": \"REMEDIATED\",\n  \"resolutionComment\": \"Applied security patches and updated configuration as recommended.\"\n}"
      }
    },
    {
      "_id": "req_example_waive_item",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Example: Waive Risk Item",
      "description": "Example request to waive a risk item",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/status",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"WAIVED\",\n  \"resolution\": \"RISK_ACCEPTED\",\n  \"resolutionComment\": \"Risk accepted by security team. Compensating controls in place.\"\n}"
      }
    },
    {
      "_id": "req_example_close_item",
      "_type": "request",
      "parentId": "folder_risk_items",
      "name": "Example: Close Risk Item",
      "description": "Example request to close a risk item",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/status",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"CLOSED\",\n  \"resolution\": \"VERIFIED\",\n  \"resolutionComment\": \"Fix verified by ARB. Closing risk item.\"\n}"
      }
    },
    {
      "_id": "req_lifecycle_get_profile",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "0. Get Profile (Find profileFieldId)",
      "description": "Get app profile to find the profileFieldId. Look for the field with fieldKey='encryption_at_rest' and copy its 'id' value to the profile_field_id environment variable.",
      "url": "{{ _.base_url }}/api/apps/{{ _.app_id }}/profile",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_lifecycle_create_evidence",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "1. Create Evidence",
      "description": "Create new evidence for testing the auto-creation lifecycle.",
      "url": "{{ _.base_url }}/api/apps/{{ _.app_id }}/evidence",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"profileFieldId\": \"{{ _.profile_field_id }}\",\n  \"type\": \"link\",\n  \"uri\": \"https://confluence.example.com/security/encryption-policy-v3.pdf\",\n  \"sourceSystem\": \"MANUAL\",\n  \"validFrom\": \"2025-10-01T00:00:00Z\",\n  \"submittedBy\": \"{{ _.developer_email }}\"\n}"
      }
    },
    {
      "_id": "req_lifecycle_attach_evidence",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "2. Attach Evidence to Field ⚠️ TRIGGERS AUTO-CREATION!",
      "description": "Attach evidence to profile field - THIS IS WHERE AUTO-RISK CREATION HAPPENS! Creates RiskItem + DomainRisk automatically if field requires review.",
      "url": "{{ _.base_url }}/api/evidence/{{ _.evidence_id }}/attach-to-field/{{ _.profile_field_id }}?appId={{ _.app_id }}",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"linkedBy\": \"{{ _.developer_email }}\",\n  \"linkComment\": \"Submitting encryption policy documentation for compliance review\"\n}"
      }
    },
    {
      "_id": "req_lifecycle_verify_risk_created",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "3. Verify Risk Item Created",
      "description": "Confirm that risk item was auto-created from evidence submission. Check: status=OPEN, evidenceStatus=submitted, priorityScore=high (1.0x multiplier)",
      "url": "{{ _.base_url }}/api/v1/risk-items/evidence/{{ _.evidence_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_lifecycle_sme_approve",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "4. SME Approves Evidence 🎯 PRIORITY DROPS!",
      "description": "SME approves the evidence. This triggers risk recalculation with 0.5x multiplier - priority score should DROP by ~50%! (e.g., 100 → 50)",
      "url": "{{ _.base_url }}/api/evidence/{{ _.evidence_id }}/review?profileFieldId={{ _.profile_field_id }}",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"action\": \"approve\",\n  \"reviewerId\": \"{{ _.sme_email }}\",\n  \"reviewComment\": \"Encryption policy meets all security requirements. Key management procedures are properly documented.\"\n}"
      }
    },
    {
      "_id": "req_lifecycle_sme_reject",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "4 (Alt). SME Rejects Evidence",
      "description": "Alternative path: SME rejects the evidence. Risk stays high priority (0.9x multiplier) signaling developer to resubmit.",
      "url": "{{ _.base_url }}/api/evidence/{{ _.evidence_id }}/review?profileFieldId={{ _.profile_field_id }}",
      "method": "POST",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"action\": \"reject\",\n  \"reviewerId\": \"{{ _.sme_email }}\",\n  \"reviewComment\": \"Documentation insufficient. Please provide more detail on key rotation procedures and access controls.\"\n}"
      }
    },
    {
      "_id": "req_lifecycle_verify_risk_updated",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "5. Verify Risk Recalculated",
      "description": "Confirm priority score dropped after approval. Check: evidenceStatus changed from 'submitted' → 'approved', priorityScore reduced (e.g., 100 → 50), updatedAt timestamp changed",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_lifecycle_verify_domain_updated",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "6. Verify Domain Risk Updated",
      "description": "Confirm domain risk aggregation recalculated. Check: priorityScore updated, updatedAt timestamp changed, aggregate counts still correct",
      "url": "{{ _.base_url }}/api/v1/domain-risks/{{ _.domain_risk_id }}",
      "method": "GET",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {}
    },
    {
      "_id": "req_lifecycle_resolve_risk",
      "_type": "request",
      "parentId": "folder_evidence_lifecycle",
      "name": "7. Resolve Risk Item",
      "description": "Mark risk item as resolved. This triggers domain risk recalculation and may auto-transition domain status to RESOLVED if this is the last open item.",
      "url": "{{ _.base_url }}/api/v1/risk-items/{{ _.risk_item_id }}/status",
      "method": "PATCH",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"RESOLVED\",\n  \"resolution\": \"REMEDIATED\",\n  \"resolutionComment\": \"Evidence approved by SME. Compliance requirement satisfied.\"\n}"
      }
    }
  ]
}
